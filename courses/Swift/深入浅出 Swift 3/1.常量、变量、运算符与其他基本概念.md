## 深入浅出 Swift 3 - 常量、变量、运算符与其他基本概念

本节相关内容如下：

- 常量、变量、运算符与其他基本概念
    + let
    + var
    + 运算符
        + 赋值运算符
        + 算数运算符
        + 组合赋值运算符
        + 比较运算符
        + 三目运算符
        + 区间运算符
        + 逻辑运算符
    + 其他基本概念

到目前为止，虽然我们还在学习一些简单的语法知识，但是我们还是首先推荐你使用脚本的方式来编写 Swift 程序，先将代码写到 `.swift` 文件中，然后再用 `swift 文件名.swift`  来执行代码，这样也有助于我们保存我们的代码。

#### 本节的代码

本节的代码可以在下面的链接中获取到，你可以通过 wget 命令下载这份代码：

```
# 使用 wget 从某个链接中下载文件
wget http://labfile.oss.aliyuncs.com/courses/611/2.zip
# 使用 unzip 来解压缩一个 zip 压缩文件
unzip 2.zip
```

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid29879labid2010timestamp1471928288053.png/wm)

## 一、`let` 和 `var`

在上一节中，我们已经学会了使用 `print` 来输出我们的内容。在计算机程序中，我们并不能每次编写程序的时候都知道我们要输出的是什么，所以就需要使用某些东西来存储、保存我们的内容。这就涉及到 Swift 中常量和变量的概念。

所谓常量，就是不变的量，我们可以通过 `let` 来向 Swfit 声明（告知）我们需要一个常量，通过 `var` 来向 Swift 声明我们需要一个变量 ：

```swift
let constNumber = 10
var variableNumber = 11

print(constNumber)
print(variableNumber)
```

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid29879labid2010timestamp1471928318817.png/wm)

这段代码可以理解为：

1. 声明一个名字叫做 `constNumber` 的常量，并给它一个值 `10`；
2. 声明一个名字叫做 `variableNumber` 的变量，并给它一个值为 `11`。
3. 分别输出 `constNumber` 和 `variableNumber` 的值

> **为什么不需要使用 `""` 了？**
> 
> 因为之前我们输出的 `hello swift` 是没有名字的，现在对于有名字的量，我们直接用它们的名字就可以了。

他们有什么区别？我们再给代码增加下面的两行内容：


```swift
constNumber = constNumber + 1
variableNumber = variableNumber + 1
```

> **不太能理解 `=`，为什么是自己等于自己加一？**
> 
> 在计算机程序中 `=` 通常表示赋值的意思，意味着把 `=` 右边的值，赋给左边。

这两行代码可以理解为：

1. 将 `constNumber` 的值加一，然后赋值给 `constNumber`；
2. 将 `variableNumber` 的值加一，然后赋值给 `variableNumber `。

这时我们发现执行不能通过，而且 Swift 还给出了我们让我们把 `constNumber` 更改为 `var` 的建议：

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid29879labid2010timestamp1471928308195.png/wm)

也就是说：**`let` 声明的常量，是不能被修改的，而 `var` 声明的变量是可以被修改的。**

所以，我们之前的 `hello swift` 还可以这么写：

```swift
let hello = "hello swift"
print(hello)
```

> **为什么用 `let` 而不是 `var`？**
> 
> 刚才说了，`var` 的值是能够被修改的，反过来，如果我们在整段代码中都没有修改过某个量，那么这个量应该被声明为 `let` 而不是 `var`。


## 二、运算符

运算符，顾名思义，就是用来做运算的。就像我们学习的数学知识一样，有加减乘除（`+` `-` `*` `/`），当然 Swift 提供的运算符远不止这些。Swift 将运算符分为了三类：

1. 一元运算符: 操作单一的对象，例如 `-variableNumber`，求得了 `variableNumber` 的相反数。
2. 二元运算符: 操作两个对象，例如 `1+2` 中的 `+` 操作了 `1` 和 `2` 两个对象。
3. 三元运算符: 操作三个对象，这个有点复杂，我们在后面详细介绍。

### 赋值运算符

刚才我们已经提到了，在计算程序中我们通常不用 `=` 来表示相等，而是用它来表示赋值：


```swift
var variableNumber = 10
variableNumber = variableNumber + 1
let newNumber = variableNumber
```

这时候，经过第二行，`variableNumber` 增加了 `1`，变成了 `11`；然后 `newNumber` 得到了 `variableNumber` 的值，也等于 `11`，不信的话可以使用 `print` 输出这两个值试试。

### 算数运算符

算数运算符也就是我们常见到的数学运算了：

- 加法（`+`）
- 减法（`-`）
- 乘法（`*`）
- 除法（`/`）
- 求余（`%`）

```swift
1 + 2               // 等于 3
5 - 3               // 等于 2
2 * 3               // 等于 6
10.0 / 2.5          // 等于 Double 4
9 % 4               // 等于 1
"hello " + "swift!" // 等于 "hello swift!"
```

### 组合赋值运算符

刚才我们写出了:

```swift
variableNumber = variableNumber + 1
```

这样的代码，这是完全没必要的，我们可以使用组合赋值运算符来简化我们的代码：

```swift
variableNumber += 1
```

对于其他的运算符也是支持的：

```swift
var test = 1
test += 1
test -= 1
test *= 1
test /= 1
test %= 1
```

### 比较运算符

终于，我们来介绍一下在编程世界中怎么表示两个数相等， Swift 使用 `==` 来表示两个数相等，例如

```swift
print(1 == 1)
```

我们能够得到 `true` 这样的输出，说明 `1` 等于 `1` 是对的（这里输出的 `true` 其实是布尔值类型，我们将在下一节中详细介绍）。

对于其他的比较，我们有：

- 等于（`a == b`）
- 不等于（`a != b`）
- 大于（`a > b`）
- 小于（`a < b`）
- 大于等于（`a >= b`）
- 小于等于（`a <= b`）

### 三目运算符

三目运算符就是我们刚才提到的三元运算符。

三目运算符的特殊在于它是有三个操作数的运算符，它的形式是 `问题 ? 答案 1 : 答案 2`。它简洁地表达根据 `问题` 成立与否作出二选一的操作。如果 `问题` 成立，返回 `答案 1` 的结果；反之返回 `答案 2` 的结果。

例如：

```swift
var a = 1
var b = 1
print( a==b ? "对的" : "错的" )
```

最后会输出`对的`。

### 区间运算符

区间运算符用来表达一个值区间，有两种形式：

1. 闭区间运算符（`a...b`）定义一个包含从 `a` 到 `b`（包括 `a` 和 `b`）的所有值的区间。`a` 的值不能超过 `b`。

2. 半开区间（`a..<b`）定义一个从 `a` 到 `b` 但不包括 `b` 的区间。
之所以称为半开区间，是因为该区间包含第一个值而不包括最后的值。

例如：

```swift
1...5
1..<5
```

分别表示 `1` 到 `5` 和 `1` 到 `4`。 

关于它的使用，可以配合 `for-in` 语句，我们将在后面的控制流一节中详细介绍，我们可以先看到下面代码对于 `...` 和 `..<` 之间的不同：

```swift
for i in 1...5 {
    print(i)
}
for i in 1..<5 {
    print(i)
}
```

前一个将输出 `1` 到 `5`，而后一个只输出 `1` 到 `4`

### 逻辑运算符

逻辑运算符操作逻辑值，我们所熟知的三个标准的逻辑运算：

- 逻辑非（`!a`）
- 逻辑与（`a && b`）
- 逻辑或（`a || b`）

例如：

```swift
var a = true
var b = false
print(!a)
print(a && b)
print(a || b)
```

将分别输出 `false`, `false`, `true`。

## 三、其他基本概念

### 括号表达优先级

表达式和它所操作的对象组成了表达式，表达式则可以变得非常复杂：

```swift
var a = true
var b = false
print(a && b || a && !a || !b)
```

例如，当我们写出这样的表达式时，究竟表示什么意思呢？

在这里我们郑重的**警告**你，虽然警告可能言重了，但确实是这样：

**永远不要写出这样的表达式。**

如果你处于某些原因一定要写这样的表达式，也请增加括号来表达这个表达式的明确语义，例如：

```swift
var a = true
var b = false
print((a && b) || (a && !a) || !b)
```

通过增加括号，我们明确了这个表达式的语义，是三个表达式的`或`运算，然后前两个子表达式都是`且`运算，而第三个表达式是`非`运算。

### 注释

随着我们的代码越来越多，我们很有可能在未来的某一天就看不懂我们当时为什么要写下这样的代码了，这对于初学编程的你可能很难理解，但事实就是如此。试想，你还记得当初你为什么要读小学吗？

注释能够帮助我们记录下一些让 Swift 在执行过程中忽略的内容，比如刚才我们编写的 

```swift
constNumber = constNumber + 1
```

这一行是不能被执行的，我们就可以通过注释的方式让 Swift 忽略掉这个语句：

```swift
// 我是注释

/*
我也是注释
*/

// constNumber = constNumber + 1

/*
constNumber = constNumber + 1
*/

// 这种注释只能注释一行内容, 良好的注释风格是在要注释的内容前面加一个空格, 像我这样

/*
这种
注释
可以注释
多行内容

但是, 这样写出来的注释很不美观, 看下面的风格
*/

/*
 * 但是我们推荐你这么写多行注释
 * 而不是像刚才那样
 */

```

Swift 的注释有两种风格，一种是用 `//` 来注释掉一行内容，第二种是用 `/*``*/`来包裹一段想要注释的内容。
